include ./classNo.pug

mixin lessonCard(lesson)
	.lesson-card.flex.flex-col.border.relative.rounded(class=(lesson.watched && lesson.checkedIn) || !lesson.videoId ? "done" : "" id=lesson._id)
		.card-top-banner.bg-twilight-50.px-3.py-2.flex-1
			h3.text-twilight-900
				+classNo(lesson.classNo)
				if loggedIn && user.admin
					a.ml-2(href=`/class/edit/${lesson._id}`) #[i.fas.fa-pencil]
			if loggedIn
				.lesson-checks.flex.flex-wrap
					.lesson-watched.mr-6
						if lesson.videoId.length
							input.watched.mr-2(type="checkbox" id="watched-" + lesson._id autocomplete="off" checked=lesson.watched data-lesson=lesson._id)
							label(id="watched-" + lesson._id) Watched
						else
							| No stream
					.lesson-checkedin
						if lesson.checkin.length && lesson.checkin[0].length
							input.checkedin.mr-2(type="checkbox" id="checkedin-" + lesson._id autocomplete="off" checked=lesson.checkedIn data-lesson=lesson._id)
							label(for="checkedin-" + lesson._id) Checked In
						else
							input.checkedin.hidden(type="checkbox" id="checkedin-" + lesson._id autocomplete="off" checked)
							| No Check In

		.card-main-content.py-4.px-6.group.flex-auto
			a(href=`/class/${lesson.permalink}` class="hover:no-underline")
				img.max-h-50.w-auto.mb-2.m-auto(src=lesson.thumbnail class="group-hover:shadow-[0_0_10px_rgba(0,_0,_0,_0.2)]")
				h2(class="group-hover:text-twilight-900") #{lesson.title}
		.card-footer.bg-twilight-50.flex.px-3.py-4.justify-between.flex-1
			a(href=`/class/${lesson.permalink}`) More Info
			if lesson.videoId && !lesson.twitchVideo
				a.text-right(href=`https://youtu.be/${lesson.videoId}`) Youtube
